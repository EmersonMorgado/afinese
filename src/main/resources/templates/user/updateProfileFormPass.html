<html>
	<head th:replace="~{base :: head}"></head>
	<body>
		<div th:replace="~{base :: menutop}"></div>
		<div class="container-fluid">
			<div class="row flex-xl-nowrap">
				<div class="card mx-auto m-3" style="width: 40rem;">
					<div class="card-body">
						<h4 class="card-title">Atualizar Senha</h4>				
						<form th:action="@{/user/profile-update-pass}"  th:object="${updatePassDto}" method="post" id="profileform" onsubmit="return validarSenha()">
							<div class="form-group">
								<label for="password">Senha Atual</label>
								<input th:field="*{password}" th:errorclass="is-invalid" type="password" name="password" class="form-control" placeholder="senha atual" />
								<div th:errors="*{password}" class="invalid-feedback">
									Erros no email.
								</div>						
							</div>
							
							<div class="form-group">
								<label for="newPassword">Nova Senha</label>
								<input th:field="*{newPassword}" th:errorclass="is-invalid" type="password" id="newPassword" name="newPassword" class="form-control" placeholder="nova senha" />
								<div th:errors="*{newPassword}" class="invalid-feedback">
									Erros no email.
								</div>						
							</div>
							<div class="form-group">
								<label for="password-repeat">Repetir Nova Senha</label>
								<input type="password" id="confirm_password" name="confirm_password" class="form-control" placeholder="repetir senha" />
								<div id="info_pass" class="text-sm-left text-danger"></div>				
							</div>
						<hr>
							<div class="pt-3">
								<button class="btn btn-success px-4" type="submit">Atualizar Senha</button>
								<a class="btn btn-danger px-4 ml-3" href="/home">Cancelar</a>
							</div>
							<br>
						</form>	
						<span class="text-danger" th:text="${serverInfo}">Password error!</span>
					</div>
				</div>
			</div>
		</div>
		<script>
			function validarSenha() {
				pass1 = document.getElementById('newPassword').value;
				pass2 = document.getElementById('confirm_password').value;
				if (document.getElementById('newPassword').value != document.getElementById('confirm_password').value) {
					document.getElementById("info_pass").innerHTML = "Senhas diferentes, favor digitar senhas iguais!!"
					return false;
				} 
				return true;
			}
		</script>
	</body>
</html>